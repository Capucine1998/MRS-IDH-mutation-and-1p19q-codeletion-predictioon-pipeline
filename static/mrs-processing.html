<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Processing</title>

    <link rel="stylesheet" href="/static/styles.css">
</head>

<body>
    <header>
        <div class="header-container">
            <img src="./img/paris_institute_of_brain_logo.png" alt="Paris Brain Institute Logo" class="logo">
            <div class="title-container">
                <h1>MEGA-PRESS MRS Processing</h1>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="/static/mrs-processing.html" class="nav-button pressed">MEGA-PRESS Processing</a></li>
                <li><a href="/static/classifier.html" class="nav-button unpressed">IDH & 1p/19q Classifier</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="toggle-switch">
                <button id="monoBtn">MONO (Files)</button>
                <button id="multiBtn" class="active">MULTI PATIENT (Folder)</button>
            </div>

            <div class="form_fake">
                <div id="monoForm" class="form-group" style="display: none;">
                    <label for="dcmFile">Import .dcm folder:</label>
                    <input type="file" id="dcmFile" accept=".dcm" multiple webkitdirectory directory>
                    <div style="margin-top: 10px;">
                        <button type="button" id="addFidFolderBtn" class="run_button" style="width:auto;">Add MEGA-PRESS fid folder</button>
                        <span id="fidFolderStatus" style="margin-left:10px;"></span>
                    </div>

                    <label for="waterDcmFile">Import water .dcm files (optional):</label>
                    <input type="file" id="waterDcmFile" accept=".dcm" multiple webkitdirectory directory>
                    <div style="margin-top: 10px;">
                        <button type="button" id="addWaterFolderBtn" class="run_button" style="width:auto;">Add water fid folder</button>
                        <span id="waterFolderStatus" style="margin-left:10px;"></span>
                    </div>
                </div>

                <div id="multiForm" class="form-group">
                    <label for="directory">Select one or more folders (or a parent folder containing many subfolders):</label>
                    <input type="file" id="directory" webkitdirectory directory multiple>
                    <div style="margin-top: 10px;">
                        <button type="button" id="addMultiFolderBtn" class="run_button" style="width:auto;">Add folder</button>
                        <span id="multiFolderStatus" style="margin-left:10px;"></span>
                    </div>
                </div>

                <button id="runBtn" class="run_button" disabled>RUN PROCESSING</button>
            </div>

            <div id="results" style="margin-top: 20px;">
                <pre id="output"></pre>
                <div id="pdf-container" style="margin-top: 20px;"></div>
                <div id="report-container" style="margin-top: 40px;"></div>
            </div>

            <div id="classifier-prompt" style="margin: 20px 0;"></div>
            <div id="report-list"></div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Paris Brain Institute. All rights reserved.</p>
        </div>
    </footer>

    <script src="/static/mrs-processing.js"></script>
    <script src="/static/utils.js"></script>
</body>

</html>
